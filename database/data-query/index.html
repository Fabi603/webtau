<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" /> 
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"> 
<title>WebTau: Data Query</title>
<link rel="stylesheet" type="text/css" href="/webtau/static/css/katex.min.css">
<link rel="stylesheet" type="text/css" href="/webtau/static/main.css">
<link rel="stylesheet" type="text/css" href="/webtau/logo.css">
<link rel="stylesheet" type="text/css" href="/webtau/static/css/global-overrides.css">
</head>
<link rel="shortcut icon" href="/webtau/favicon.png"type="image/ico"/>
<body class="theme-znai-dark">
<script>(function() {
    var themeNameKey = 'znaiTheme';
    var darkThemeName = 'znai-dark';
    var lightThemeName = 'default';

    var znaiTheme = {
        changeHandlers: [],
        addChangeHandler(handler) {
            this.changeHandlers.push(handler);
        },
        removeChangeHandler(handler) {
            var idx = this.changeHandlers.indexOf(handler);
            this.changeHandlers.splice(idx, 1);
        },
        set(name) {
            this.name = name;
            document.body.className = 'theme-' + name;

            var idx = 0;
            var len = this.changeHandlers.length;
            for (; idx < len; idx++) {
                this.changeHandlers[idx](name);
            }
        },
        setExplicitly(name) {
            storeThemeName(name);
            this.set(name);
        },
        setExplicitlyIfNotSetAlready(name) {
            const themeName = getStoredThemeName();
            if (themeName) {
                return
            }

            this.setExplicitly(name)
        },
        toggle() {
            this.setExplicitly(this.name === lightThemeName ? darkThemeName : lightThemeName)
        }
    };

    var mediaThemeName = setLightMatchMediaListenerAndGetThemeName()
    var themeName = getStoredThemeName() || mediaThemeName;
    znaiTheme.set(themeName);

    window.znaiTheme = znaiTheme;

    function getStoredThemeName() {
        return localStorage.getItem(themeNameKey);
    }

    function storeThemeName(name) {
        return localStorage.setItem(themeNameKey, name);
    }

    function setLightMatchMediaListenerAndGetThemeName() {
        if (!window.matchMedia) {
            return darkThemeName;
        }

        var lightQuery = window.matchMedia('(prefers-color-scheme: light)');
        lightQuery.addListener(function (e) {
            const newThemeName = e.matches ? lightThemeName : darkThemeName;
            znaiTheme.setExplicitly(newThemeName);
        });

        return lightQuery.matches ? lightThemeName : darkThemeName;
    }
})()</script>
<div id="znai"><div id="znai-initial-page-loading" style="margin: -20px 0 0 -20px; padding: 0 40px 40px 0; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center">
    <div></div>
</div><section style="max-width: 640px; margin-left: auto; margin-right: auto;">
<article>
<header><h1>Full Table</h1></header>
<p>To query all data from a table use: def PRICES = db.table(&quot;PRICES&quot;) PRICES.should == [&quot;ID&quot; | &quot;DESCRIPTION&quot; | &quot;PRICE&quot;] { ___________________________________ &quot;id1&quot; | &quot;nice set&quot; | 1000 &quot;id2&quot; | &quot;another set&quot; | 2000 }</p>
</article>

<article>
<header><h1>Custom Query</h1></header>
<p>def queriedData = db.query(&quot;select * from PRICES where id=:id&quot;, [id: &quot;id1&quot;]) queriedData.should == [&quot;ID&quot; | &quot;DESCRIPTION&quot; | &quot;PRICE&quot;] { ___________________________________ &quot;id1&quot; | &quot;nice set&quot; | 1000 }</p>
</article>

<article>
<header><h1>Single Value</h1></header>
<p>def price = db.query(&quot;select price from PRICES where id=:id&quot;, [id: 'id1']) price.should == 1000 price.shouldNot == 2000</p>
</article>

<article>
<header><h1>Query Result Value</h1></header>
<p>Value returned from query methods is an instance of DatabaseQueryResult type. It keeps the context of where the value came from and preserves it during assertions to have additional information in a test report.To access underlying value for business logic use def price = db.query(&quot;select price from PRICES where id=:id&quot;, [id: 'id1']) if (price.singleValue &gt; 100) { println(&quot;do something&quot;) }</p>
</article>
</section>
</div>
<script type="text/javascript" src="/webtau/toc.js"></script>
<script type="text/javascript" src="/webtau/assets.js"></script>
<script type="text/javascript" src="/webtau/static/main.js"></script>
<script type="text/javascript" src="/webtau/search-index.js"></script>
<script>
document.getElementById('znai').innerHTML = '';
/*<!--*/
ReactDOM.render(React.createElement(Documentation, {
  "docMeta" : {
    "viewOn" : {
      "link" : "https://github.com/testingisdocumenting/webtau/tree/master/webtau-docs/znai",
      "title" : "View On GitHub"
    },
    "id" : "webtau",
    "title" : "WebTau",
    "type" : "Guide",
    "previewEnabled" : false,
    "allowedGroups" : [ "admin" ]
  },
  "page" : {
    "type" : "Page",
    "content" : [ {
      "title" : "Full Table",
      "id" : "full-table",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "To query all data from a table use:",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "def PRICES = db.table(\"PRICES\")\nPRICES.should == [\"ID\" | \"DESCRIPTION\" | \"PRICE\"] {\n                 ___________________________________\n                 \"id1\" | \"nice set\"    | 1000\n                 \"id2\" | \"another set\" | 2000 }",
        "entry" : "query method on table should be optional during comparison",
        "title" : "validate whole table",
        "bodyOnly" : true,
        "startLine" : "query whole table start",
        "endLine" : "query whole table end",
        "excludeStartEnd" : true,
        "type" : "Snippet"
      } ]
    }, {
      "title" : "Custom Query",
      "id" : "custom-query",
      "type" : "Section",
      "content" : [ {
        "lang" : "groovy",
        "snippet" : "def queriedData = db.query(\"select * from PRICES where id=:id\", [id: \"id1\"])\nqueriedData.should == [\"ID\" | \"DESCRIPTION\" | \"PRICE\"] {\n                      ___________________________________\n                      \"id1\" | \"nice set\"    | 1000     }",
        "entry" : "query table with select statement and param",
        "title" : "validate parts of a table",
        "bodyOnly" : true,
        "startLine" : "query with where clause start",
        "endLine" : "query with where clause end",
        "excludeStartEnd" : true,
        "type" : "Snippet"
      } ]
    }, {
      "title" : "Single Value",
      "id" : "single-value",
      "type" : "Section",
      "content" : [ {
        "lang" : "groovy",
        "snippet" : "def price = db.query(\"select price from PRICES where id=:id\", [id: 'id1'])\nprice.should == 1000\nprice.shouldNot == 2000",
        "entry" : "should query single value with params",
        "title" : "validate single value",
        "bodyOnly" : true,
        "startLine" : "query single value params start",
        "endLine" : "query single value params end",
        "excludeStartEnd" : true,
        "type" : "Snippet"
      } ]
    }, {
      "title" : "Query Result Value",
      "id" : "query-result-value",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Value returned from ",
          "type" : "SimpleText"
        }, {
          "code" : "query",
          "type" : "InlinedCode"
        }, {
          "text" : " methods is an instance of ",
          "type" : "SimpleText"
        }, {
          "code" : "DatabaseQueryResult",
          "type" : "InlinedCode"
        }, {
          "text" : " type.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "It keeps the context of where the value came from and preserves it during assertions to have additional information in",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "a test report.",
          "type" : "SimpleText"
        } ]
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "To access underlying value for business logic use",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "def price = db.query(\"select price from PRICES where id=:id\", [id: 'id1'])\nif (price.singleValue > 100) {\n    println(\"do something\")\n}",
        "entry" : "value returned from query is a special wrapper value",
        "title" : "access single value",
        "bodyOnly" : true,
        "startLine" : "single value access start",
        "endLine" : "single value access end",
        "excludeStartEnd" : true,
        "type" : "Snippet"
      } ]
    } ],
    "lastModifiedTime" : 1610327005050,
    "tocItem" : {
      "sectionTitle" : "Database",
      "pageTitle" : "Data Query",
      "pageMeta" : { },
      "dirName" : "database",
      "fileName" : "data-query",
      "viewOnRelativePath" : null,
      "pageSectionIdTitles" : [ {
        "title" : "Full Table",
        "id" : "full-table"
      }, {
        "title" : "Custom Query",
        "id" : "custom-query"
      }, {
        "title" : "Single Value",
        "id" : "single-value"
      }, {
        "title" : "Query Result Value",
        "id" : "query-result-value"
      } ]
    }
  },
  "footer" : {
    "type" : "Footer",
    "content" : [ {
      "type" : "Paragraph",
      "content" : [ {
        "text" : "If you have documentation suggestions, features or bugs to report, please create ",
        "type" : "SimpleText"
      }, {
        "url" : "https://github.com/testingisdocumenting/webtau/issues",
        "isFile" : false,
        "type" : "Link",
        "content" : [ {
          "text" : "GitHub Issue",
          "type" : "SimpleText"
        } ]
      } ]
    }, {
      "type" : "Paragraph",
      "content" : [ {
        "text" : "Contributions are welcome",
        "type" : "SimpleText"
      } ]
    } ]
  }
}), document.getElementById("znai"));
/*-->*/

</script>

</body>
</html>
