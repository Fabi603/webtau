<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" /> 
<title>WebTau: Headers</title><link rel="stylesheet" type="text/css" href="/webtau/guide/static/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/webtau/guide/static/main.css">
<link rel="stylesheet" type="text/css" href="/webtau/guide/logo.css">
</head>
<link rel="shortcut icon" href="/webtau/guide/favicon.png"type="image/ico"/>
<body>
<div id="mdoc"><section style="max-width: 640px; margin-left: auto; margin-right: auto;">
<article>
<header><h1>Standard Header</h1></header>
<p>Standard headers like  Content-Type  and  Accept  are set on your behalf. When payload content is present then values are based on the content type you are sending. When no payload is present, it defaults to  application/json .</p>
</article>

<article>
<header><h1>Common Header</h1></header>
<p>If each http request requires the same header you can specify that header using  httpHeaderProvider . Common example is specifying authentication header. import scenarios.rest.headers.auth.Auth

url = "http://localhost:8080"

httpHeaderProvider = Auth.&authHeader Where  Auth.&authHeader  is implemented as follows: package scenarios.rest.headers.auth

import com.twosigma.webtau.console.ConsoleOutputs
import com.twosigma.webtau.http.HttpHeader

class Auth {
    static HttpHeader authHeader(String fullUrl, String url, HttpHeader original) {
        ConsoleOutputs.out('auth header injection point')
        return original.merge([Authorization: 'Bearer <token>'])
    }
} This removes implementation details from your tests and makes them less brittle.</p>
</article>

<article>
<header><h1>Explicit Header</h1></header>
<p>To explicitly set header pass  http.header(values)  as an additional parameter. Additionally  http.header  accepts values as a map.</p>
</article>

<article>
<header><h1>Response Header</h1></header>
<p>To validate values from response header use  header  object. At the moment only  location ,  contentLocation ,  contentLength  have camelCase shortcuts. All the other header values you need to use  ['Header-Name']  syntax.</p>
</article>
</section>
</div>
<script type="text/javascript" src="/webtau/guide/toc.js"></script>
<script type="text/javascript" src="/webtau/guide/static/react.min.js"></script>
<script type="text/javascript" src="/webtau/guide/static/react-dom.min.js"></script>
<script type="text/javascript" src="/webtau/guide/static/main.js"></script>
<script type="text/javascript" src="/webtau/guide/search-index.js"></script>
<script>
document.getElementById('mdoc').innerHTML = '';
ReactDOM.render(React.createElement(Documentation, {
  "docMeta": {
    "viewOn": {
      "link": "https://github.com/twosigma/webtau/tree/master/webtau-docs/webtau",
      "title": "View On GitHub"
    },
    "id": "webtau/guide",
    "title": "WebTau",
    "type": "Guide",
    "previewEnabled": false
  },
  "page": {
    "type": "Page",
    "content": [
      {
        "title": "Standard Header",
        "id": "standard-header",
        "type": "Section",
        "content": [
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "Standard headers like ",
                "type": "SimpleText"
              },
              {
                "code": "Content-Type",
                "type": "InlinedCode"
              },
              {
                "text": " and ",
                "type": "SimpleText"
              },
              {
                "code": "Accept",
                "type": "InlinedCode"
              },
              {
                "text": " are set on your behalf.",
                "type": "SimpleText"
              },
              {
                "type": "SoftLineBreak"
              },
              {
                "text": "When payload content is present then values are based on the content type you are sending.",
                "type": "SimpleText"
              },
              {
                "type": "SoftLineBreak"
              },
              {
                "text": "When no payload is present, it defaults to ",
                "type": "SimpleText"
              },
              {
                "code": "application/json",
                "type": "InlinedCode"
              },
              {
                "text": ".",
                "type": "SimpleText"
              }
            ]
          }
        ]
      },
      {
        "title": "Common Header",
        "id": "common-header",
        "type": "Section",
        "content": [
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "If each http request requires the same header you can specify that header using ",
                "type": "SimpleText"
              },
              {
                "code": "httpHeaderProvider",
                "type": "InlinedCode"
              },
              {
                "text": ".",
                "type": "SimpleText"
              },
              {
                "type": "SoftLineBreak"
              },
              {
                "text": "Common example is specifying authentication header.",
                "type": "SimpleText"
              }
            ]
          },
          {
            "lang": "cfg",
            "snippet": "import scenarios.rest.headers.auth.Auth\n\nurl \u003d \"http://localhost:8080\"\n\nhttpHeaderProvider \u003d Auth.\u0026authHeader",
            "title": "webtau.cfg",
            "type": "Snippet"
          },
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "Where ",
                "type": "SimpleText"
              },
              {
                "code": "Auth.\u0026authHeader",
                "type": "InlinedCode"
              },
              {
                "text": " is implemented as follows:",
                "type": "SimpleText"
              }
            ]
          },
          {
            "lang": "groovy",
            "snippet": "package scenarios.rest.headers.auth\n\nimport com.twosigma.webtau.console.ConsoleOutputs\nimport com.twosigma.webtau.http.HttpHeader\n\nclass Auth {\n    static HttpHeader authHeader(String fullUrl, String url, HttpHeader original) {\n        ConsoleOutputs.out(\u0027auth header injection point\u0027)\n        return original.merge([Authorization: \u0027Bearer \u003ctoken\u003e\u0027])\n    }\n}",
            "title": "scenarios/rest/headers/auth/Auth.groovy",
            "type": "Snippet"
          },
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "This removes implementation details from your tests and makes them less brittle.",
                "type": "SimpleText"
              }
            ]
          }
        ]
      },
      {
        "title": "Explicit Header",
        "id": "explicit-header",
        "type": "Section",
        "content": [
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "To explicitly set header pass ",
                "type": "SimpleText"
              },
              {
                "code": "http.header(values)",
                "type": "InlinedCode"
              },
              {
                "text": " as an additional parameter.",
                "type": "SimpleText"
              }
            ]
          },
          {
            "lang": "groovy",
            "snippet": "http.get(\"/end-point\", http.header(\u0027Accept\u0027, \u0027application/octet-stream\u0027)) {\n    // assertions go here\n}\n\nhttp.get(\"/end-point\", [queryParam1: \u0027queryParamValue1\u0027],\n        http.header(\u0027Accept\u0027, \u0027application/octet-stream\u0027)) {\n    // assertions go here\n}\n\nhttp.post(\"/end-point\", http.header(\u0027Accept\u0027, \u0027application/octet-stream\u0027),\n        [fileId: \u0027myFile\u0027]) {\n    // assertions go here\n}\n\nhttp.put(\"/end-point\", http.header(\u0027Accept\u0027, \u0027application/octet-stream\u0027),\n        [fileId: \u0027myFile\u0027, file: sampleFile]) {\n    // assertions go here\n}\n\nhttp.delete(\"/end-point\", http.header(\u0027Custom-Header\u0027, \u0027special-value\u0027))",
            "entry": "explicit header passing example",
            "bodyOnly": true,
            "type": "Snippet"
          },
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "Additionally ",
                "type": "SimpleText"
              },
              {
                "code": "http.header",
                "type": "InlinedCode"
              },
              {
                "text": " accepts values as a map.",
                "type": "SimpleText"
              }
            ]
          },
          {
            "lang": "groovy",
            "snippet": "def varArgHeader \u003d http.header(\n        \u0027My-Header1\u0027, \u0027Value1\u0027,\n        \u0027My-Header2\u0027, \u0027Value2\u0027)\n\ndef mapBasedHeader \u003d http.header([\n        \u0027My-Header1\u0027: \u0027Value1\u0027,\n        \u0027My-Header2\u0027: \u0027Value2\u0027])\n\nassert varArgHeader \u003d\u003d mapBasedHeader",
            "entry": "header creation",
            "bodyOnly": true,
            "type": "Snippet"
          }
        ]
      },
      {
        "title": "Response Header",
        "id": "response-header",
        "type": "Section",
        "content": [
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "To validate values from response header use ",
                "type": "SimpleText"
              },
              {
                "code": "header",
                "type": "InlinedCode"
              },
              {
                "text": " object.",
                "type": "SimpleText"
              }
            ]
          },
          {
            "lang": "groovy",
            "snippet": "http.post(\"/end-point\") {\n    header.location.should \u003d\u003d \u0027http://www.example.org/url/23\u0027\n    header[\u0027Location\u0027].should \u003d\u003d \u0027http://www.example.org/url/23\u0027\n\n    header.contentLocation.should \u003d\u003d \u0027/url/23\u0027\n    header[\u0027Content-Location\u0027].should \u003d\u003d \u0027/url/23\u0027\n\n    header.contentLength.should \u003d\u003d 303\n    header[\u0027Content-Length\u0027].should \u003d\u003d 303\n}",
            "entry": "header assertion with shortcut",
            "bodyOnly": true,
            "type": "Snippet"
          },
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "At the moment only ",
                "type": "SimpleText"
              },
              {
                "code": "location",
                "type": "InlinedCode"
              },
              {
                "text": ", ",
                "type": "SimpleText"
              },
              {
                "code": "contentLocation",
                "type": "InlinedCode"
              },
              {
                "text": ", ",
                "type": "SimpleText"
              },
              {
                "code": "contentLength",
                "type": "InlinedCode"
              },
              {
                "text": " have camelCase shortcuts.",
                "type": "SimpleText"
              },
              {
                "type": "SoftLineBreak"
              },
              {
                "text": "All the other header values you need to use ",
                "type": "SimpleText"
              },
              {
                "code": "[\u0027Header-Name\u0027]",
                "type": "InlinedCode"
              },
              {
                "text": " syntax.",
                "type": "SimpleText"
              }
            ]
          }
        ]
      }
    ],
    "lastModifiedTime": 1533822471000,
    "tocItem": {
      "sectionTitle": "REST",
      "pageTitle": "Headers",
      "pageMeta": {},
      "fileName": "headers",
      "dirName": "REST",
      "pageSectionIdTitles": [
        {
          "title": "Standard Header",
          "id": "standard-header"
        },
        {
          "title": "Common Header",
          "id": "common-header"
        },
        {
          "title": "Explicit Header",
          "id": "explicit-header"
        },
        {
          "title": "Response Header",
          "id": "response-header"
        }
      ]
    }
  },
  "footer": {}
}), document.getElementById("mdoc"));
</script>

</body>
</html>
