<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" /> 
<title>WebTau: Documentation</title><link rel="stylesheet" type="text/css" href="/guide/static/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/guide/static/css/katex.min.css">
<link rel="stylesheet" type="text/css" href="/guide/static/main.css">
<link rel="stylesheet" type="text/css" href="/guide/logo.css">
</head>
<link rel="shortcut icon" href="/guide/favicon.png"type="image/ico"/>
<body>
<div id="mdoc"><!--
  ~ Copyright 2019 TWO SIGMA OPEN SOURCE, LLC
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div id="znai-initial-page-loading" style="margin: -20px 0 0 -20px; padding: 0 40px 40px 0; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center">
    <div></div>
</div><section style="max-width: 640px; margin-left: auto; margin-right: auto;">
<article>
<header><h1>Scenarios</h1></header>
<p>You document REST endpoints so users can use them to achieve various goals. You also need to make sure that documented scenarios work as advertised.To automate the process, capture executed scenarios and use them inside your documentation.</p>
</article>

<article>
<header><h1>Capturing Test Artifacts</h1></header>
<p>To capture REST artifacts use http.doc.capture : package scenarios.rest import static com.twosigma.webtau.WebTauDsl.http import static com.twosigma.webtau.WebTauGroovyDsl.scenario scenario(&quot;extracting id after POST to use inside GET request&quot;) { def id = http.post(&quot;/employee&quot;, [firstName: 'FN', lastName: 'LN']) { return id } http.doc.capture('employee-post') http.get(&quot;/employee/$id&quot;) { firstName.should == 'FN' lastName.should == 'LN' } http.doc.capture('employee-get') // capture previous HTTP call into &lt;docDir&gt;/employee-get } An employee-get directory will be created containing a number of test artifacts.</p>
</article>

<article>
<header><h1>Test Artifacts Location</h1></header>
<p>By default, the directory will be created in the current working directory. To change it add docPath to your webtau.cfg file. url = &quot;http://localhost:8180&quot; docPath = &quot;doc-artifacts&quot;</p>
</article>

<article>
<header><h1>Test Artifacts</h1></header>
<p>A number of artifacts will be created depending on the exact call being captured.Request bodies are captured in either request.json , request.pdf or request.data depending on the type.Similarly, response bodies are captured in either response.json , response.pdf or response.data .Just like payloads, request and response headers are captured in request.header.txt and response.header.txt respectively. These files contain a header per line with the name and values colon separated. The values are redacted for any potentially sensitive headers.Any assertions you perform on the response body in your scenarios are captured in a paths.json file. This contains an array with the list of paths within the body whose values were asserted.The actual request URL is captured in two forms into two different files: request.fullurl.txt - contains the full URL request.url.txt - contains only the part specified in the http call in the scenario /params?a=1&amp;b=text http://192.168.1.5:59620/params?a=1&amp;b=text</p>
</article>

<article>
<header><h1>Document REST calls</h1></header>
<p>If you have user facing scenario tests, capture them and refer to them inside your documentation. Set your documentation build pipeline like below.Combine REST requests and responses with Open API generated specs for complete documentation.</p>
</article>
</section>
</div>
<script type="text/javascript" src="/guide/toc.js"></script>
<script type="text/javascript" src="/guide/assets.js"></script>
<script type="text/javascript" src="/guide/static/react.min.js"></script>
<script type="text/javascript" src="/guide/static/react-dom.min.js"></script>
<script type="text/javascript" src="/guide/static/main.js"></script>
<script type="text/javascript" src="/guide/search-index.js"></script>
<script>
document.getElementById('mdoc').innerHTML = '';
ReactDOM.render(React.createElement(Documentation, {
  "docMeta" : {
    "viewOn" : {
      "link" : "https://github.com/twosigma/webtau/tree/master/webtau-docs/webtau",
      "title" : "View On GitHub"
    },
    "id" : "guide",
    "title" : "WebTau",
    "type" : "Guide",
    "previewEnabled" : false
  },
  "page" : {
    "type" : "Page",
    "content" : [ {
      "title" : "Scenarios",
      "id" : "scenarios",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "You document ",
          "type" : "SimpleText"
        }, {
          "code" : "REST endpoints",
          "type" : "InlinedCode"
        }, {
          "text" : " so users can use them to achieve various goals.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "You also need to make sure that documented scenarios work as advertised.",
          "type" : "SimpleText"
        } ]
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "To automate the process, capture executed scenarios and use them inside your documentation.",
          "type" : "SimpleText"
        } ]
      } ]
    }, {
      "title" : "Capturing Test Artifacts",
      "id" : "capturing-test-artifacts",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "To capture ",
          "type" : "SimpleText"
        }, {
          "code" : "REST",
          "type" : "InlinedCode"
        }, {
          "text" : " artifacts use ",
          "type" : "SimpleText"
        }, {
          "code" : "http.doc.capture",
          "type" : "InlinedCode"
        }, {
          "text" : ":",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "package scenarios.rest\n\nimport static com.twosigma.webtau.WebTauDsl.http\nimport static com.twosigma.webtau.WebTauGroovyDsl.scenario\n\nscenario(\"extracting id after POST to use inside GET request\") {\n    def id = http.post(\"/employee\", [firstName: 'FN', lastName: 'LN']) {\n        return id\n    }\n    http.doc.capture('employee-post')\n\n    http.get(\"/employee/$id\") {\n        firstName.should == 'FN'\n        lastName.should == 'LN'\n    }\n    http.doc.capture('employee-get') // capture previous HTTP call into <docDir>/employee-get\n}",
        "title" : "test.groovy",
        "commentsType" : "inline",
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "An ",
          "type" : "SimpleText"
        }, {
          "code" : "employee-get",
          "type" : "InlinedCode"
        }, {
          "text" : " directory will be created containing a number of test artifacts.",
          "type" : "SimpleText"
        } ]
      } ]
    }, {
      "title" : "Test Artifacts Location",
      "id" : "test-artifacts-location",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "By default, the directory will be created in the current working directory.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "To change it add ",
          "type" : "SimpleText"
        }, {
          "code" : "docPath",
          "type" : "InlinedCode"
        }, {
          "text" : " to your ",
          "type" : "SimpleText"
        }, {
          "code" : "webtau.cfg",
          "type" : "InlinedCode"
        }, {
          "text" : " file.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "cfg",
        "snippet" : "url = \"http://localhost:8180\"\n\ndocPath = \"doc-artifacts\"",
        "title" : "webtau.cfg",
        "type" : "Snippet"
      } ]
    }, {
      "title" : "Test Artifacts",
      "id" : "test-artifacts",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "A number of artifacts will be created depending on the exact call being captured.",
          "type" : "SimpleText"
        } ]
      }, {
        "level" : 2,
        "title" : "Request and response payloads",
        "id" : "request-and-response-payloads",
        "type" : "SubHeading"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Request bodies are captured in either ",
          "type" : "SimpleText"
        }, {
          "code" : "request.json",
          "type" : "InlinedCode"
        }, {
          "text" : ", ",
          "type" : "SimpleText"
        }, {
          "code" : "request.pdf",
          "type" : "InlinedCode"
        }, {
          "text" : " or ",
          "type" : "SimpleText"
        }, {
          "code" : "request.data",
          "type" : "InlinedCode"
        }, {
          "text" : " depending on the type.",
          "type" : "SimpleText"
        } ]
      }, {
        "title" : "employee-post/request.json",
        "data" : {
          "firstName" : "FN",
          "lastName" : "LN"
        },
        "paths" : [ ],
        "type" : "Json"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Similarly, response bodies are captured in either ",
          "type" : "SimpleText"
        }, {
          "code" : "response.json",
          "type" : "InlinedCode"
        }, {
          "text" : ", ",
          "type" : "SimpleText"
        }, {
          "code" : "response.pdf",
          "type" : "InlinedCode"
        }, {
          "text" : " or ",
          "type" : "SimpleText"
        }, {
          "code" : "response.data",
          "type" : "InlinedCode"
        }, {
          "text" : ".",
          "type" : "SimpleText"
        } ]
      }, {
        "title" : "employee-get/response.json",
        "data" : {
          "firstName" : "FN",
          "lastName" : "LN"
        },
        "paths" : [ ],
        "type" : "Json"
      }, {
        "level" : 2,
        "title" : "Request and response headers",
        "id" : "request-and-response-headers",
        "type" : "SubHeading"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Just like payloads, request and response headers are captured in ",
          "type" : "SimpleText"
        }, {
          "code" : "request.header.txt",
          "type" : "InlinedCode"
        }, {
          "text" : " and ",
          "type" : "SimpleText"
        }, {
          "code" : "response.header.txt",
          "type" : "InlinedCode"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "respectively. These files contain a header per line with the name and values colon separated.  The values",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "are redacted for any potentially sensitive headers.",
          "type" : "SimpleText"
        } ]
      }, {
        "title" : "redacted request.header.txt",
        "data" : "testheader: testValue\nauthorization: ................",
        "paths" : [ ],
        "type" : "Json"
      }, {
        "level" : 2,
        "title" : "Response body assertions",
        "id" : "response-body-assertions",
        "type" : "SubHeading"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Any assertions you perform on the response body in your scenarios are captured in a ",
          "type" : "SimpleText"
        }, {
          "code" : "paths.json",
          "type" : "InlinedCode"
        }, {
          "text" : " file.  This",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "contains an array with the list of paths within the body whose values were asserted.",
          "type" : "SimpleText"
        } ]
      }, {
        "title" : "employee-get/paths.json",
        "data" : [ "root.firstName", "root.lastName" ],
        "paths" : [ ],
        "type" : "Json"
      }, {
        "level" : 2,
        "title" : "Request URLs",
        "id" : "request-urls",
        "type" : "SubHeading"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "The actual request URL is captured in two forms into two different files:",
          "type" : "SimpleText"
        } ]
      }, {
        "bulletMarker" : "*",
        "tight" : true,
        "type" : "BulletList",
        "content" : [ {
          "type" : "ListItem",
          "content" : [ {
            "type" : "Paragraph",
            "content" : [ {
              "code" : "request.fullurl.txt",
              "type" : "InlinedCode"
            }, {
              "text" : " - contains the full URL",
              "type" : "SimpleText"
            } ]
          } ]
        }, {
          "type" : "ListItem",
          "content" : [ {
            "type" : "Paragraph",
            "content" : [ {
              "code" : "request.url.txt",
              "type" : "InlinedCode"
            }, {
              "text" : " - contains only the part specified in the http call in the scenario",
              "type" : "SimpleText"
            } ]
          } ]
        } ]
      }, {
        "lang" : "txt",
        "snippet" : "/params?a=1&b=text",
        "title" : "request.url.txt",
        "type" : "Snippet"
      }, {
        "lang" : "txt",
        "snippet" : "http://192.168.1.5:59620/params?a=1&b=text",
        "title" : "request.fullurl.txt",
        "type" : "Snippet"
      } ]
    }, {
      "title" : "Document REST calls",
      "id" : "document-rest-calls",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "If you have user facing scenario tests, capture them and refer to them inside your documentation.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "Set your documentation build pipeline like below.",
          "type" : "SimpleText"
        } ]
      }, {
        "diagram" : {
          "isInvertedTextColorByStyleId" : { },
          "svg" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.40.1 (20161225.0304)\n -->\n<!-- Title: Generated Pages: 1 -->\n<svg width=\"392pt\" height=\"47pt\"\n viewBox=\"0.00 0.00 391.85 47.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 43)\">\n<title>Generated</title>\n<polygon fill=\"transparent\" stroke=\"transparent\" points=\"-4,4 -4,-43 387.8516,-43 387.8516,4 -4,4\"/>\n<!-- build -->\n<g id=\"node1\" class=\"node\">\n<title>build</title>\n<polygon fill=\"none\" stroke=\"#000000\" points=\"0,-.5 0,-38.5 54,-38.5 54,-.5 0,-.5\"/>\n<text text-anchor=\"middle\" x=\"27\" y=\"-16.5\" font-family=\"Helvetica,sans-Serif\" font-size=\"10.00\" fill=\"#000000\">Build</text>\n</g>\n<!-- deploy -->\n<g id=\"node2\" class=\"node\">\n<title>deploy</title>\n<polygon fill=\"none\" stroke=\"#000000\" points=\"90,-.5 90,-38.5 149.1279,-38.5 149.1279,-.5 90,-.5\"/>\n<text text-anchor=\"middle\" x=\"119.564\" y=\"-16.5\" font-family=\"Helvetica,sans-Serif\" font-size=\"10.00\" fill=\"#000000\">Deploy</text>\n</g>\n<!-- build&#45;&gt;deploy -->\n<g id=\"edge1\" class=\"edge\">\n<title>build&#45;&gt;deploy</title>\n<path fill=\"none\" stroke=\"#000000\" d=\"M54.2716,-19.5C62.2333,-19.5 71.1035,-19.5 79.6754,-19.5\"/>\n<polygon fill=\"#000000\" stroke=\"#000000\" points=\"79.9022,-23.0001 89.9022,-19.5 79.9021,-16.0001 79.9022,-23.0001\"/>\n</g>\n<!-- testrun -->\n<g id=\"node3\" class=\"node\">\n<title>testrun</title>\n<polygon fill=\"none\" stroke=\"#000000\" points=\"185.1279,-.5 185.1279,-38.5 252.5908,-38.5 252.5908,-.5 185.1279,-.5\"/>\n<text text-anchor=\"middle\" x=\"218.8594\" y=\"-16.5\" font-family=\"Helvetica,sans-Serif\" font-size=\"10.00\" fill=\"#000000\">Test Run</text>\n</g>\n<!-- deploy&#45;&gt;testrun -->\n<g id=\"edge2\" class=\"edge\">\n<title>deploy&#45;&gt;testrun</title>\n<path fill=\"none\" stroke=\"#000000\" d=\"M149.3559,-19.5C157.3159,-19.5 166.0912,-19.5 174.6485,-19.5\"/>\n<polygon fill=\"#000000\" stroke=\"#000000\" points=\"174.9089,-23.0001 184.9089,-19.5 174.9088,-16.0001 174.9089,-23.0001\"/>\n</g>\n<!-- documentation -->\n<g id=\"node4\" class=\"node\">\n<title>documentation</title>\n<polygon fill=\"none\" stroke=\"#000000\" points=\"288.5908,-.5 288.5908,-38.5 383.8516,-38.5 383.8516,-.5 288.5908,-.5\"/>\n<text text-anchor=\"middle\" x=\"336.2212\" y=\"-16.5\" font-family=\"Helvetica,sans-Serif\" font-size=\"10.00\" fill=\"#000000\">Documentation</text>\n</g>\n<!-- testrun&#45;&gt;documentation -->\n<g id=\"edge3\" class=\"edge\">\n<title>testrun&#45;&gt;documentation</title>\n<path fill=\"none\" stroke=\"#000000\" d=\"M252.8053,-19.5C260.7852,-19.5 269.5121,-19.5 278.219,-19.5\"/>\n<polygon fill=\"#000000\" stroke=\"#000000\" points=\"278.3852,-23.0001 288.3852,-19.5 278.3851,-16.0001 278.3852,-23.0001\"/>\n</g>\n</g>\n</svg>\n",
          "stylesByNodeId" : {
            "testrun" : [ "h" ]
          },
          "id" : "dag1"
        },
        "idsToHighlight" : [ ],
        "wide" : false,
        "urls" : { },
        "type" : "GraphVizDiagram"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Combine REST requests and responses with Open API generated specs for complete documentation.",
          "type" : "SimpleText"
        } ]
      } ]
    } ],
    "lastModifiedTime" : 1565767143000,
    "tocItem" : {
      "sectionTitle" : "REST",
      "pageTitle" : "Documentation",
      "pageMeta" : { },
      "fileName" : "documentation",
      "dirName" : "REST",
      "pageSectionIdTitles" : [ {
        "title" : "Scenarios",
        "id" : "scenarios"
      }, {
        "title" : "Capturing Test Artifacts",
        "id" : "capturing-test-artifacts"
      }, {
        "title" : "Test Artifacts Location",
        "id" : "test-artifacts-location"
      }, {
        "title" : "Test Artifacts",
        "id" : "test-artifacts"
      }, {
        "title" : "Document REST calls",
        "id" : "document-rest-calls"
      } ]
    }
  },
  "footer" : { }
}), document.getElementById("mdoc"));
</script>

</body>
</html>
