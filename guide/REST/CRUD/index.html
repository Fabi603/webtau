<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" /> 
<title>WebTau: CRUD</title><link rel="stylesheet" type="text/css" href="/webtau/guide/static/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/webtau/guide/static/main.css">
<link rel="stylesheet" type="text/css" href="/webtau/guide/logo.css">
</head>
<link rel="shortcut icon" href="/webtau/guide/favicon.png"type="image/ico"/>
<body>
<div id="mdoc"><section style="max-width: 640px; margin-left: auto; margin-right: auto;">
<article>
<header><h1>Example</h1></header>
<p>We have an app that exposes create, read, update, and delete operations for customer records. Records are being served under  /customers . Here is an example of a  CRUD  operations test. package scenarios.rest.springboot

import static com.twosigma.webtau.WebTauGroovyDsl.*

scenario("CRUD operations for customer") {
    def customerPayload = [firstName: "FN", lastName: "LN"]

    int id = http.post("/customers", customerPayload) {
        return id // return id value from response body
    }

    http.get("/customers/${id}") {
        body.should == customerPayload // only specified properties will be asserted against
    }

    def changedLastName = "NLN"
    http.put("/customers/${id}", [*:customerPayload, lastName: changedLastName]) {
        lastName.should == changedLastName // specifying body is optional
    }

    http.get("/customers/${id}") {
        lastName.should == changedLastName
    }

    http.delete("/customers/${id}") {
        statusCode.should == 204
    }

    http.get("/customers/${id}") {
        statusCode.should == 404
    }
}</p>
</article>

<article>
<header><h1>Implicit statusCode Check</h1></header>
<p>If you don't have an explicit  statusCode  validation it will be automatically validated based on the rules below Method Expected Code [{text=GET, type=SimpleText}] [{text=200, type=SimpleText}] [{text=POST, type=SimpleText}] [{text=201, type=SimpleText}] [{text=PUT, type=SimpleText}] [{text=200, type=SimpleText}] [{text=PUT (no content), type=SimpleText}] [{text=204, type=SimpleText}] [{text=DELETE, type=SimpleText}] [{text=200, type=SimpleText}] [{text=DELETE (no content), type=SimpleText}] [{text=204, type=SimpleText}]</p>
</article>

<article>
<header><h1>Report</h1></header>
<p>After your test executions a report will be produced. Note: asserted values are being tracked and highlighted inside the report</p>
</article>

<article>
<header><h1>Spring Boot</h1></header>
<p>WebTau is framework agnostic. However, to make a concrete example, the  /customer   CRUD  endpoint is created by using  https://projects.spring.io/spring-boot/ Spring Boot . Three files are required to have a working REST endpoint with  CRUD  operations. Domain object package com.example.demo.springboot.app.data;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

@Entity
public class Customer {
    private Long id;
    private String firstName;
    private String lastName;

    @Id
    @GeneratedValue
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
} Repository package com.example.demo.springboot.app.data;

import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.rest.core.annotation.RepositoryRestResource;

@Api(tags = "customer")
@RepositoryRestResource(collectionResourceRel = "customers", path = "customers")
public interface CustomerRepository extends JpaRepository<Customer, Long> {
    @ApiOperation("find all customers ordered by last name")
    Iterable<Customer> findAllByOrderByLastName();
} Entry point package com.example.demo.springboot.app;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Import;
import org.springframework.data.jpa.repository.config.EnableJpaRepositories;
import springfox.documentation.builders.PathSelectors;
import springfox.documentation.builders.RequestHandlerSelectors;
import springfox.documentation.spi.DocumentationType;
import springfox.documentation.spring.web.plugins.Docket;
import springfox.documentation.swagger2.annotations.EnableSwagger2;

@SpringBootApplication
@EnableJpaRepositories
@EnableSwagger2
@Import({springfox.documentation.spring.data.rest.configuration.SpringDataRestConfiguration.class})
public class SpringBootDemoApp {
    public static void main(String[] args) {
        SpringApplication.run(SpringBootDemoApp.class, args);
    }

    @Bean
    public Docket api() {
        return new Docket(DocumentationType.SWAGGER_2)
                .select()
                .apis(RequestHandlerSelectors.any())
                .paths(PathSelectors.any())
                .build();
    }
}</p>
</article>
</section>
</div>
<script type="text/javascript" src="/webtau/guide/toc.js"></script>
<script type="text/javascript" src="/webtau/guide/static/react.min.js"></script>
<script type="text/javascript" src="/webtau/guide/static/react-dom.min.js"></script>
<script type="text/javascript" src="/webtau/guide/static/main.js"></script>
<script type="text/javascript" src="/webtau/guide/search-index.js"></script>
<script>
document.getElementById('mdoc').innerHTML = '';
ReactDOM.render(React.createElement(Documentation, {
  "docMeta": {
    "viewOn": {
      "link": "https://github.com/twosigma/webtau/tree/master/webtau-docs/webtau",
      "title": "View On GitHub"
    },
    "id": "webtau/guide",
    "title": "WebTau",
    "type": "Guide",
    "previewEnabled": false
  },
  "page": {
    "type": "Page",
    "content": [
      {
        "title": "Example",
        "id": "example",
        "type": "Section",
        "content": [
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "We have an app that exposes create, read, update, and delete operations for customer records. Records are being served",
                "type": "SimpleText"
              },
              {
                "type": "SoftLineBreak"
              },
              {
                "text": "under ",
                "type": "SimpleText"
              },
              {
                "code": "/customers",
                "type": "InlinedCode"
              },
              {
                "text": ".",
                "type": "SimpleText"
              }
            ]
          },
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "Here is an example of a ",
                "type": "SimpleText"
              },
              {
                "code": "CRUD",
                "type": "InlinedCode"
              },
              {
                "text": " operations test.",
                "type": "SimpleText"
              }
            ]
          },
          {
            "lang": "groovy",
            "snippet": "package scenarios.rest.springboot\n\nimport static com.twosigma.webtau.WebTauGroovyDsl.*\n\nscenario(\"CRUD operations for customer\") {\n    def customerPayload \u003d [firstName: \"FN\", lastName: \"LN\"]\n\n    int id \u003d http.post(\"/customers\", customerPayload) {\n        return id // return id value from response body\n    }\n\n    http.get(\"/customers/${id}\") {\n        body.should \u003d\u003d customerPayload // only specified properties will be asserted against\n    }\n\n    def changedLastName \u003d \"NLN\"\n    http.put(\"/customers/${id}\", [*:customerPayload, lastName: changedLastName]) {\n        lastName.should \u003d\u003d changedLastName // specifying body is optional\n    }\n\n    http.get(\"/customers/${id}\") {\n        lastName.should \u003d\u003d changedLastName\n    }\n\n    http.delete(\"/customers/${id}\") {\n        statusCode.should \u003d\u003d 204\n    }\n\n    http.get(\"/customers/${id}\") {\n        statusCode.should \u003d\u003d 404\n    }\n}",
            "commentsType": "inline",
            "type": "Snippet"
          }
        ]
      },
      {
        "title": "Implicit statusCode Check",
        "id": "implicit-statuscode-check",
        "type": "Section",
        "content": [
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "If you don\u0027t have an explicit ",
                "type": "SimpleText"
              },
              {
                "code": "statusCode",
                "type": "InlinedCode"
              },
              {
                "text": " validation it will be automatically validated based on the rules below",
                "type": "SimpleText"
              }
            ]
          },
          {
            "table": {
              "columns": [
                {
                  "title": "Method",
                  "align": "left"
                },
                {
                  "title": "Expected Code",
                  "align": "left"
                }
              ],
              "data": [
                [
                  [
                    {
                      "text": "GET",
                      "type": "SimpleText"
                    }
                  ],
                  [
                    {
                      "text": "200",
                      "type": "SimpleText"
                    }
                  ]
                ],
                [
                  [
                    {
                      "text": "POST",
                      "type": "SimpleText"
                    }
                  ],
                  [
                    {
                      "text": "201",
                      "type": "SimpleText"
                    }
                  ]
                ],
                [
                  [
                    {
                      "text": "PUT",
                      "type": "SimpleText"
                    }
                  ],
                  [
                    {
                      "text": "200",
                      "type": "SimpleText"
                    }
                  ]
                ],
                [
                  [
                    {
                      "text": "PUT (no content)",
                      "type": "SimpleText"
                    }
                  ],
                  [
                    {
                      "text": "204",
                      "type": "SimpleText"
                    }
                  ]
                ],
                [
                  [
                    {
                      "text": "DELETE",
                      "type": "SimpleText"
                    }
                  ],
                  [
                    {
                      "text": "200",
                      "type": "SimpleText"
                    }
                  ]
                ],
                [
                  [
                    {
                      "text": "DELETE (no content)",
                      "type": "SimpleText"
                    }
                  ],
                  [
                    {
                      "text": "204",
                      "type": "SimpleText"
                    }
                  ]
                ]
              ]
            },
            "type": "Table"
          }
        ]
      },
      {
        "title": "Report",
        "id": "report",
        "type": "Section",
        "content": [
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "After your test executions a report will be produced.",
                "type": "SimpleText"
              }
            ]
          },
          {
            "fit": true,
            "imageSrc": "/webtau/guide/img/rest-report-http-calls.png",
            "shapes": [],
            "width": 2738.0,
            "height": 1740.0,
            "type": "AnnotatedImage"
          },
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "Note: asserted values are being tracked and highlighted inside the report",
                "type": "SimpleText"
              }
            ]
          }
        ]
      },
      {
        "title": "Spring Boot",
        "id": "spring-boot",
        "type": "Section",
        "content": [
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "WebTau is framework agnostic. However, to make a concrete example, the ",
                "type": "SimpleText"
              },
              {
                "code": "/customer",
                "type": "InlinedCode"
              },
              {
                "text": " ",
                "type": "SimpleText"
              },
              {
                "code": "CRUD",
                "type": "InlinedCode"
              },
              {
                "text": " endpoint",
                "type": "SimpleText"
              },
              {
                "type": "SoftLineBreak"
              },
              {
                "text": "is created by using ",
                "type": "SimpleText"
              },
              {
                "url": "https://projects.spring.io/spring-boot/",
                "isFile": false,
                "type": "Link",
                "content": [
                  {
                    "text": "Spring Boot",
                    "type": "SimpleText"
                  }
                ]
              },
              {
                "text": ".",
                "type": "SimpleText"
              }
            ]
          },
          {
            "type": "Paragraph",
            "content": [
              {
                "text": "Three files are required to have a working REST endpoint with ",
                "type": "SimpleText"
              },
              {
                "code": "CRUD",
                "type": "InlinedCode"
              },
              {
                "text": " operations.",
                "type": "SimpleText"
              }
            ]
          },
          {
            "delimiter": ".",
            "startNumber": 1,
            "type": "OrderedList",
            "content": [
              {
                "type": "ListItem",
                "content": [
                  {
                    "type": "Paragraph",
                    "content": [
                      {
                        "text": "Domain object",
                        "type": "SimpleText"
                      }
                    ]
                  },
                  {
                    "lang": "java",
                    "snippet": "package com.example.demo.springboot.app.data;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\n\n@Entity\npublic class Customer {\n    private Long id;\n    private String firstName;\n    private String lastName;\n\n    @Id\n    @GeneratedValue\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id \u003d id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName \u003d firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName \u003d lastName;\n    }\n}",
                    "title": "Customer.java",
                    "type": "Snippet"
                  }
                ]
              },
              {
                "type": "ListItem",
                "content": [
                  {
                    "type": "Paragraph",
                    "content": [
                      {
                        "text": "Repository",
                        "type": "SimpleText"
                      }
                    ]
                  },
                  {
                    "lang": "java",
                    "snippet": "package com.example.demo.springboot.app.data;\n\nimport io.swagger.annotations.Api;\nimport io.swagger.annotations.ApiOperation;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.rest.core.annotation.RepositoryRestResource;\n\n@Api(tags \u003d \"customer\")\n@RepositoryRestResource(collectionResourceRel \u003d \"customers\", path \u003d \"customers\")\npublic interface CustomerRepository extends JpaRepository\u003cCustomer, Long\u003e {\n    @ApiOperation(\"find all customers ordered by last name\")\n    Iterable\u003cCustomer\u003e findAllByOrderByLastName();\n}",
                    "title": "CustomerRepository.java",
                    "type": "Snippet"
                  }
                ]
              },
              {
                "type": "ListItem",
                "content": [
                  {
                    "type": "Paragraph",
                    "content": [
                      {
                        "text": "Entry point",
                        "type": "SimpleText"
                      }
                    ]
                  },
                  {
                    "lang": "java",
                    "snippet": "package com.example.demo.springboot.app;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport springfox.documentation.builders.PathSelectors;\nimport springfox.documentation.builders.RequestHandlerSelectors;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spring.web.plugins.Docket;\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n\n@SpringBootApplication\n@EnableJpaRepositories\n@EnableSwagger2\n@Import({springfox.documentation.spring.data.rest.configuration.SpringDataRestConfiguration.class})\npublic class SpringBootDemoApp {\n    public static void main(String[] args) {\n        SpringApplication.run(SpringBootDemoApp.class, args);\n    }\n\n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.any())\n                .paths(PathSelectors.any())\n                .build();\n    }\n}",
                    "title": "SpringBootDemoApp.java",
                    "type": "Snippet"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "lastModifiedTime": 1533120126000,
    "tocItem": {
      "sectionTitle": "REST",
      "pageTitle": "CRUD",
      "pageMeta": {},
      "fileName": "CRUD",
      "dirName": "REST",
      "pageSectionIdTitles": [
        {
          "title": "Example",
          "id": "example"
        },
        {
          "title": "Implicit statusCode Check",
          "id": "implicit-statuscode-check"
        },
        {
          "title": "Report",
          "id": "report"
        },
        {
          "title": "Spring Boot",
          "id": "spring-boot"
        }
      ]
    }
  },
  "footer": {}
}), document.getElementById("mdoc"));
</script>

</body>
</html>
